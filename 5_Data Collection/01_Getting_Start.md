## Data Collection
### Data can be collected from multiple different sources.
 1. **Primary Data Sources**
    - Data collected by the individual or organisation for a specific purpose.

    - Primary Data Sources are expensive but we have more control over the data.
    - Examples: 
        - *Sensors & Devices* - Iot Devices (sensors, smart devices), health wearables etc. 
        
        - *Surveys & Forms* - Customer Satisfaction, feedback etc. Tools like google forms etc can be used.
        - *Interviews*, *Questionnaires*, *experiments & Observations*.
 2. **Secondary Data Sources**
    - Data that has already been collected and processed by others.

    - Secondary Data Sources are cheaper but we have less control over data quality and format. 
    - Examples: 
        - *Databases* - SQL & NoSQL Databases.

        - *Public Datasets* - Kaggle, UCI (University of California) ML Repo etc.
        - *API* - Twitter API, Stock API, Weather API etc.
        - *Web Scraping* - Extracting information from web pages (HTML pages), blogs/articles, social meida pages etc.
            - Note: We cannot scrape data from any website freely. We must follow the website’s terms of service, robots.txt rules and data usage guidelines to check whether data collection is allowed or not.
3. **System Generated Data**
    - Data automatically generated by systems, applications, or machines during normal operations.

    - Examples - logs, video feeds, synthetic data etc.

## Starting with SQL using MySQL Database
- If you encounter the error “mysql is not recognized as an internal or external command, operable program or batch file” while running MySQL from the command prompt.
- Consider this MySQL [video](https://youtu.be/_b3bgMhzxYY?si=P2s_AySJUuQa7Uap).
### What is Database?
- It is a collection of data in a format that can be easily accessed.
### What is DBMS?
- A DBMS is created by adding a management layer over a database.

- The Management System (MS) allow users to communicate with database using SQL (Structured Query Language), It means it works like an interface between user and database.
- A DBMS is software designed to handle data storage, manipulation and retrieval in an organized manner.
### SQL (Structured Query Language)
- SQL is a database query language used to interact with relational databases.

### SQL Vs NoSQL
- SQL
    1. Relational Database (data stored in Tables)
    
    2. Example: MySQL, Oracle, PostgreSQL etc.
- NoSQL
    1. Non Relational Database (data stored in document/key-value pairs/graphs etc)

    2. Example: MongoDB, Cassandra, Neo4j etc.

### What is Database in MySQL?
- A database in MySQL is an organized collection of data stored in the form of `tables`, where data can be easily stored, managed and retrieved using SQL.
### In MySQL, columns and rows have specific names
- Column => Field & Attribute

- Row => Record & Tuple
### Connecting VsCode with MySQL
- Refer to this [video](https://youtu.be/FuSxGqWacd0?si=a3GYs18h9cns-4-r).
### Database Queries:
1. `CREATE DATABASE db_name;` OR `CREATE DATABASE IF NOT EXISTS db_name;`

2. `DROP DATABASE db_name;` OR `DROP DATABASE IF EXISTS db_name;`
3. `CREATE TABLE table_name(column_name1 datatype constraint,column_name2 datatype constraint,);` -> Creates Table or Schema (structure) of the table.

### CHAR Vs VARCHAR
1. `CHAR` is a fixed-length data type, which means it always uses the same amount of storage space, even if the actual value is shorter. For example, if `CHAR(10)` is used to store the value "ABC", the database will still allocate 10 characters and fill the remaining space with blank spaces. This makes CHAR slightly faster but can `waste` memory.

2. On the other hand, `VARCHAR` is a variable-length data type, so it only uses the space required to store the actual data. If `VARCHAR(10)` stores "ABC", it will use only 3 characters. Because of this, VARCHAR is more `memory-efficient` and is commonly used for values like names, emails and addresses where the length can change.

### `UNSIGNED` Datatype
- In databases (like MySQL), UNSIGNED means a number cannot be negative.

- Normally, numeric data types can store both negative and positive values. When you add `UNSIGNED`, the column stores only zero and positive numbers.
- For example, an `INT` column can store values from -2,147,483,648 to 2,147,483,647. But an `INT UNSIGNED` column can store values from 0 to 4,294,967,295. Since negative numbers are not allowed, the space that was used for negatives is used to store bigger positive numbers instead.

### What are Constraints?
- Constraints in MySQL are rules applied to table columns to make sure the data stored in the database is correct, valid and consistent.
- Types of Constraints in MySQL:
    1. `NOT NULL` - Ensures that a column cannot have NULL (empty) values.

    2. `UNIQUE` - Ensures that all values in a column are different.
    3. `PRIMARY KEY` - Combines NOT NULL + UNIQUE, Uniquely identifies each record in a table, Only one primary key per table
        - SYNTAX: `CREATE TABLE table_name(ID INT PRIMARY KEY,NAME VARCHAR(30));` OR
        - `CREATE TABLE table_name(ID INT,NAME VARCHAR(50),PRIMARY KEY(ID));`
    4. `FOREIGN KEY` - Creates a relationship between two tables, `FOREIGN KEY` is a column in one table that refers to the `PRIMARY KEY` of another table, `FOREIGN KEY` can have duplicate & null values, There can be multiple `FOREIGN KEYS` in a table.
        - SYNTAX: `CREATE TABLE table_name(CUSTOMER_ID INT,FOREIGN KEY (CUSTOMER_ID) REFERENCES another_TABLE_name(ID));`
    5. `CHECK` - Ensures that values meet a specific condition.
        - SYNTAX: `CONSTRAINT constraint_name CHECK (col_name >= 13);`
        - Keep in mind `constraint_name` is optional.
    6. `DEFAULT` - Sets a default value if no value is provided.
        - SYNTAX: `CREATE TABLE USER(ID INT,FOLLOWERS INT DEFAULT 0);`
    7. `AUTO_INCREMENT` - Automatically increases numeric values (usually for IDs).

### `INSERT` SYNTAX - Order of values must match column list order.
- SYNTAX: 
    - `INSERT INTO table_name VALUES (Column1_Value1, Column2_Value1, Column3_Value1),(column1_value2,column2_value2,column3_value2);`

    - OR
    - `INSERT INTO table_name (COL1, COL2, COL3) VALUES (column1_value1, column2_value1, column3_value1),(column1_value2, column2_value2, column3_value2);`
- `Note:` The `INSERT` statement without a column list is useful when inserting multiple rows at once and when values are provided for all columns in the table in the correct order. For all other cases—such as inserting selected columns, using `DEFAULT` or `AUTO_INCREMENT` values by skipping columns-the column list should be used.

### CLAUSE - part of a SQL statement that performs a specific task.
1. `SELECT` 
    - `SELECT` is used to select & show data from the table.

    - SYNTAX:
        1. `SELECT col1,col2 FROM table_name;`

        2. `SELECT * FROM table_name;`
2. `WHERE`
    - `WHERE` is used to define conditions.
    
    - SYNTAX:
        1. `SELECT col1,col2 FROM table_name WHERE conditions;`
    - Operators used with `WHERE` Clause:
        1. Arithmetic Operators: `+`, `-`, `*`, `/`, `%` (Modulus)

        2. Comparison Operators: `=`, `!=`, `>`, `>=`, `<` ,`<=`
        3. Logical Operators: 
            - `AND`, `OR` 

            - `NOT` - Negate the given condition.
                - `SELECT * FROM table_name WHERE col_name NOT IN("val1","val2");`
            - `IN` - Matches any value in the list.
                - `SELECT * FROM table_name WHERE EMAIL IN ("val1","val2","val3");`
            - `BETWEEN` - `BETWEEN` is used to select values within a specified range and it uses the `AND` operator to define the lower and upper limits.
            - `ALL` - Compare a value with a set of values returned by a subquery. The condition becomes true only if the comparison is true for every value in that set.
                - `SELECT * FROM students WHERE marks > ALL (SELECT marks FROM topper);`
            - `LIKE` - Used to search for a pattern in a column, it uses wildcard characters `%` - it means multiple characters and `_` - it means single character.
                - `SELECT * FROM table_name WHERE EMAIL LIKE "R%";`
            - `ANY` - Compare a value with a set of values returned by a subquery. The condition becomes true if the comparison is true for at least one value in that set.
                - `SELECT * FROM students WHERE marks > ANY (SELECT marks FROM topper);`
        4. Bitwise Operators: `&` (Bitwise AND), `|` (Bitwise OR)
3. `LIMIT`
    - used to restrict the number of rows returned by a query.

    - SYNTAX:
        - `SELECT col1,col2 FROM table_name LIMIT number;`
4. `ORDER BY`
    - Sort in ascending (ASC) or descending order (DESC)

    - SYNTAX:
        - `SELECT * FROM table_name ORDER BY col_name ASC;`
5. `GROUP BY`
    - Used to group rows that have the same values in one or more columns.

    - Mostly used with aggregate functions.
    - All columns in `SELECT` must either be included in the `GROUP BY` clause or used inside an aggregate function.
    - SYNTAX:
        - `SELECT col1,col2 FROM table_name GROUP BY col_name(s);`
6. `HAVING`
    - Used when we want to apply any conditions after grouping.

    - `WHERE` is used to filter individual rows before grouping.
    - Grouping is necessary for `HAVING`.
    - SYNTAX:
        - `SELECT col1,col2 FROM table_name GROUP BY col_name(S) HAVING CONDITION;`

### AGGREGATE FUNCTIONS
- Aggregate functions perform a calculation on a set of values and return a single value.
    1. `COUNT()`

    2. `MAX()`
    3. `MIN()`
    4. `SUM()`
    5. `AVG()`
- SYNTAX:
    - `SELECT AGG_FUNC(col_name) AS temp_col_name FROM table_name;`

### UPDATE (to update existing rows)
- SYNTAX:
    - `UPDATE table_name SET col1=val1,col2=val2 WHERE CONDITION;`

### DELETE (to delete existing rows)
- `DELETE` query without `WHERE` clause can delete all rows from a table.

- SYNTAX:
    - `DELETE FROM table_name WHERE condition;`

### KEYWORDS 
1. `DISTINCT`
    - `DISTINCT` is a keyword used with `SELECT` to remove duplicate values from the result.

    - Syntax:
        `SELECT DISTINCT col_name FROM table_name;`



### ALTER (to change the table schema)
1. `ALTER TABLE table_name ADD COLUMN column_name datatype constraint;` -> Adds column
2. `ALTER TABLE table_name DROP COLUMN column_name;` -> Drop Column
3. `ALTER TABLE table_name RENAME TO new_table_name;` -> Rename Table
4. `ALTER TABLE table_name CHANGE COLUMN old_name new_name new datatype new constraint;` -> Rename Column
5. `ALTER TABLE table_name MODIFY col_name new_datatype new_constraint;` -> Modify Column's datatype & constraint

### TRUNCATE (to delete table's data ONLY)
- `TRUNCATE TABLE table_name;`


## Practice Qs
1. Create a database for your college.
    - Create a table named Teacher to store (id,name,subject, salary)
    - Insert following data in the table:
        - 01,"Rohit Biswash","Full Stack",50000
        - 02,"Manya Mishra","Business Management",50000
        - 03,"Namo Narayan Shukla","Human Behaviour",45000
        - 04, "Rudraksh Sharma","Communication & Ethics",49000
    - Select teachers whose salary is more than 25k
    - Rename the salary column of teacher table to ctc
    - Update salary of all teachers by giving them an increment of 25%
    - Add a new column for teachers called city. The default city should be "Gurgaon"
    - Delete the salary column for teacher table

2. Create a table to store student info (roll_no, name, city, marks)
    - Insert following data in the table:
        - 110,"Adam","Delhi",76
        - 108,"Bob","Mumbai",65
        - 124,"Casey","Pune",94
        - 112,"Duke","Pune",90
    - Select all students who scored 75+
    - Find names of all citites where students are from
    - Find the maximum marks of students from each city
    - Find the average of the class
    - Add a new column grade, assign grade such that:
        - marks > 80, grade = O
        - Marks 70-80, grade = A


## Transactions & ACID Properties
- A transaction in MySQL is a group of one or more SQL statements that are executed as a single unit of work.

- Suppose you transfer ₹500 from your account to your friend’s account. The system first deducts ₹500 from your account and then adds ₹500 to your friend’s account. These two steps are treated as one single unit of work called a transaction. If both steps are completed successfully, the changes are saved permanently (`COMMIT`). But if any problem occurs in between, like a system error, all changes are cancelled (`ROLLBACK`) so that no money is lost. This ensures the data remains correct and safe.
- Either all the statements are successfully completed or none of them are applied.
- `ACID` stands for Atomicity, Consistency, Isolation, and Durability.
- `Atomicity` means a transaction is treated as a single unit, so either all operations happen or none happen at all. 
- `Consistency` means the database rules must always be followed before and after a transaction. For example in a bank database - account balance can't be negative & there are more such rules.
- `Isolation` means that multiple transactions running at the same time do not affect each other’s intermediate results. 
- `Durability` guarantees that once a transaction is committed, the changes are permanently saved even if there is a system crash or power failure.

### AutoCommit in MySQL
- In MySQL, AutoCommit is a mode where every SQL statement is automatically saved (committed) as soon as it is executed.
- You can check it by `SELECT @@autocommit;` this command, If it returns 1, it means AutoCommit is enabled, and MySQL automatically saves each statement after it is executed.
If SELECT `SELECT @@autocommit;` returns 0, it means AutoCommit is OFF.
- Use `SET AUTOCOMMIT = 0;` to disable autocommit.
- Use `SET AUTOCOMMIT = 1;` to enable autocommit.

## Performing Transactions & ACID Properties practically
- To perform this we have to disable autocommit first.

- See the steps:
    ```sql
        -- Check AutoCommit status
        SELECT @@AUTOCOMMIT;

        -- Show existing databases
        SHOW DATABASES;

        -- Create new database
        CREATE DATABASE BANK;

        -- Use the new database
        USE BANK;

        -- Create ACCOUNTS table
        CREATE TABLE ACCOUNTS (
            ID INT PRIMARY KEY AUTO_INCREMENT,
            NAME VARCHAR(50),
            BALANCE DECIMAL(10,2)
        );

        -- Insert sample data into ACCOUNTS
        INSERT INTO ACCOUNTS (NAME, BALANCE) VALUES
        ("ADAM", 500.00),
        ("BOB", 300.00),
        ("CHARLIE", 1000.00);

        -- Check inserted records
        SELECT * FROM ACCOUNTS;

        -- Disable AutoCommit
        SET AUTOCOMMIT = 0;

        -- Start a transaction
        START TRANSACTION;

        -- Update balances
        UPDATE ACCOUNTS SET BALANCE = BALANCE - 50 WHERE ID = 1;
        UPDATE ACCOUNTS SET BALANCE = BALANCE + 50 WHERE ID = 2;

        -- Check balances within transaction
        SELECT * FROM ACCOUNTS;

        -- You can see the changes you made in a transaction within the same session, even if AutoCommit is off.
        -- However, these changes are not permanently stored in the database until you execute: COMMIT;
        -- To check this open another new session & run:
        -- SELECT * FROM ACCOUNTS;
        -- You will see the old values there.
    ```
- `COMMIT` is a command used to permanently save all the changes made in a transaction.
    ```sql
        START TRANSACTION;

        -- Update balances
        UPDATE ACCOUNTS SET BALANCE = BALANCE - 50 WHERE ID = 1;
        UPDATE ACCOUNTS SET BALANCE = BALANCE + 50 WHERE ID = 2;

        COMMIT;

        -- Open another session and you will see that the changes are saved now.
    ```
- `ROLLBACK` is a command used to undo all changes made in the current transaction.
- `ROLLBACK` can undo changes only if the transaction has not been committed yet.
- Once you use `COMMIT` in a transaction, all changes are permanently saved. After committing, ROLLBACK cannot undo anything.
    ```sql
        START TRANSACTION;

        UPDATE ACCOUNTS SET BALANCE = BALANCE - 50 WHERE ID = 1;
        UPDATE ACCOUNTS SET BALANCE = BALANCE + 50 WHERE ID = 2;

        -- Suppose, some errors occurs in this place say - network error, then undo all the changes made in transactions.

        ROLLBACK;
    ```

## SavePoint in Transactions
- `SAVEPOINT` is a way to set a bookmark inside a transaction so you can roll back to that point without undoing the entire transaction.

- Imagine you are shopping online and paying for multiple items in a single transaction:
    - You buy a laptop for ₹50,000.
    - You buy a phone for ₹20,000.
    - You expect a cashback of ₹1,000 on the phone, but realize the wrong cashback was applied.
- You don’t want to cancel the laptop purchase, only the phone’s cashback adjustment.
- See example:
    ```sql
        SET AUTOCOMMIT = 0;
        START TRANSACTION;

        -- Step 1: Buy laptop
        UPDATE USER_ACCOUNT SET BALANCE = BALANCE - 50000 WHERE ID = 1;
        INSERT INTO ORDERS (ITEM, AMOUNT) VALUES ('Laptop', 50000);

        SAVEPOINT after_laptop;  -- Savepoint after laptop purchase

        -- Step 2: Buy phone with cashback
        UPDATE USER_ACCOUNT SET BALANCE = BALANCE - 20000 + 1000 WHERE ID = 1; -- applied cashback
        INSERT INTO ORDERS (ITEM, AMOUNT) VALUES ('Phone', 20000);

        -- Oops! Cashback was wrong, rollback only phone transaction
        ROLLBACK TO after_laptop;

        -- Commit the rest
        COMMIT;
    ```

## Joins in SQL
- A `JOIN` in SQL is used to combine rows from two or more tables based on a related column between them.
- Types of joins:
    1. `INNER JOIN` – Only returns rows that have matching values in both tables.
    - SYNTAX:
        ```sql
            SELECT COLUMNS
            FROM TABLEA
            INNER JOIN TABLEB
            ON TABLEA.COL_NAME = TABLEB.COL_NAME;
        ```
    - EXAMPLE:
        ```sql
            -- Create CUSTOMER table
            CREATE TABLE CUSTOMER(
                CUSTOMER_ID INT PRIMARY KEY,
                NAME VARCHAR(50),
                CITY VARCHAR(50)
            );

            -- Insert data into CUSTOMER
            INSERT INTO CUSTOMER VALUES 
                (1,"ALICE","MUMBAI"),       
                (2, "BOB","DELHI"),
                (3,"CHARLIE","BANGALORE"),
                (4,"DAVID","MUMBAI");

            -- Create ORDERS table
            CREATE TABLE ORDERS(
                ORDER_ID INT PRIMARY KEY,
                CUSTOMER_ID INT,
                AMOUNT INT
            );

            -- Insert data into ORDERS
            INSERT INTO ORDERS VALUES
                (101,1,500),
                (102,1,900),
                (103,2,300),
                (104,5,700);

            -- Check CUSTOMER table
            SELECT * FROM CUSTOMER;

            -- Check ORDERS table
            SELECT * FROM ORDERS;

            -- Perform INNER JOIN
            SELECT * 
            FROM CUSTOMER
            INNER JOIN ORDERS
            ON CUSTOMER.CUSTOMER_ID = ORDERS.CUSTOMER_ID;

            --OR

            SELECT C.CUSTOMER_ID,O.ORDER_ID,C.NAME
            FROM CUSTOMER C
            INNER JOIN ORDERS O
            ON C.CUSTOMER_ID = O..CUSTOMER_ID;
        ```
    2. `LEFT JOIN` - All rows from the left table + matching rows from right table (NULL if no match)
        - SYNTAX:
            ```sql
                SELECT columns
                FROM tableA
                LEFT JOIN tableB
                ON tableA.col_name = tableB.col_name;
            ```
        - EXAMPLE:
            ```sql
                SELECT *        
                FROM CUSTOMER
                LEFT JOIN ORDERS
                ON CUSTOMER.CUSTOMER_ID = ORDERS.CUSTOMER_ID;
            ```
    3. `RIGHT JOIN` - All rows from the right table + matching rows from left table (NULL if no match)
        - SYNTAX:
            ```sql
                SELECT columns
                FROM tableA
                RIGHT JOIN tableB
                ON tableA.col_name = tableB.col_name;
            ```
        - EXAMPLE:
            ```sql
                SELECT *        
                FROM CUSTOMER
                RIGHT JOIN ORDERS
                ON CUSTOMER.CUSTOMER_ID = ORDERS.CUSTOMER_ID;
            ```
    4. `OUTER JOIN` or `FULL JOIN` - `OUTER JOIN` returns all rows from one or both tables. If a row doesn’t have a match in the other table, it still appears in the result with NULL values.
        - In MySQL, there is no direct keyword `OUTER JOIN` to use like in some other SQL databases. To achieve the effect of a `FULL OUTER JOIN`, we need to combine a `LEFT JOIN` and a `RIGHT JOIN` using the `UNION` operator. `UNION` is used to combine the results of two or more `SELECT` queries into a single result set. By default, `UNION` removes duplicate rows, it means we get unique values. If you want to keep duplicates, use `UNION ALL`.
        
         - SYNTAX:
            ```sql
            SELECT columns
            FROM tableA
            LEFT JOIN tableB
            ON tableA.col_name = tableB.col_name
            UNION
            SELECT columns
            FROM tableA
            RIGHT JOIN tableB
            ON tableA.col_name = tableB.col_name;
            ```
        - EXAMPLE:
            ```sql
            -- WITHOUT DUPLICATES
            SELECT *        
            FROM CUSTOMER
            LEFT JOIN ORDERS
            ON CUSTOMER.CUSTOMER_ID = ORDERS.CUSTOMER_ID
            UNION
            SELECT *        
            FROM CUSTOMER
            RIGHT JOIN ORDERS
            ON CUSTOMER.CUSTOMER_ID = ORDERS.CUSTOMER_ID;

            -- WITH DUPLICATES
                SELECT *        
            FROM CUSTOMER
            LEFT JOIN ORDERS
            ON CUSTOMER.CUSTOMER_ID = ORDERS.CUSTOMER_ID
            UNION ALL
            SELECT *        
            FROM CUSTOMER
            RIGHT JOIN ORDERS
            ON CUSTOMER.CUSTOMER_ID = ORDERS.CUSTOMER_ID;
            ```
    5. `CROSS JOIN` - A `CROSS JOIN` returns the Cartesian product of two tables. This means every row from the first table is combined with every row of the second table. It does not require any matching column. The number of rows in the result = rows in table1 × rows in table2.
        - SYNTAX:
            ```sql
            SELECT *
            FROM tableA
            CROSS JOIN tableB;
            ```
    6. `SELF JOIN` - A `SELF JOIN` is when a table is joined with itself. It is used to compare rows within the same table. You need to use table aliases to distinguish the two instances of the same table. `SELF JOINs` are not used very often in everyday SQL queries.
        - SYNTAX:
            ```sql
            SELECT *
            FROM TABLE1 AS A
            JOIN TABLE1 AS B
            ON A.col_name = B.col_name;
            ```
    
    7. `LEFT EXCLUSIVE JOIN` - Returns only those records from the LEFT table that do not have a matching record in the RIGHT table. When we take a left exclusive join, we first use a `LEFT JOIN`, then we select only those records where `NULL` values appear.
        - SYNTAX:

            ```sql
            SELECT * 
            FROM TABLE AS A
            JOIN TABLE2 AS B
            ON A.column = B.column
            WHERE B.column IS NULL;
            ```
        - EXAMPLE:
            ```sql
            SELECT *
            FROM CUSTOMER AS A
            LEFT JOIN ORDERS AS B
            ON A.CUSTOMER_ID = B.CUSTOMER_ID
            WHERE B.CUSTOMER_ID IS NULL;
            ```
    8. `RIGHT EXCLUSIVE JOIN` - Returns only those records from the RIGHT table that do not have a matching record in the LEFT table. When we take a right exclusive join, we first use a `RIGHT JOIN`, then we select only those records where `NULL` values appear.
        - SYNTAX:

            ```sql
            SELECT * 
            FROM TABLE AS A
            JOIN TABLE2 AS B
            ON A.column = B.column
            WHERE A.column IS NULL;
            ```
        - EXAMPLE:
            ```sql
            SELECT *
            FROM CUSTOMER AS A
            RIGHT JOIN ORDERS AS B
            ON A.CUSTOMER_ID = B.CUSTOMER_ID
            WHERE A.CUSTOMER_ID IS NULL;
            ```

## Sub-Queries
- A `Subquery` or `Inner Query` or a `Nested Query` is a query within another SQL Query. It involves 2 `SELECT` statements. A subquery can be used inside the `SELECT` clause, 'FROM' CLAUSE or the `WHERE` clause. 

- SYNTAX:
    ```sql
        SELECT column
        FROM table_name
        WHERE col_name OPERATOR(
            subquery
        );
    ```
- EXAMPLE:
    ```sql
        SELECT *          
        FROM ORDERS
        WHERE AMOUNT > (
            SELECT AVG(amount)
            FROM ORDERS
        );
    ```
- EXAMPLE 2:
    ```sql
        SELECT NAME,
        ( SELECT COUNT(*)
            FROM ORDERS
            WHERE ORDERS.CUSTOMER_ID = CUSTOMER.CUSTOMER_ID
        ) AS ORDER_COUNT
        FROM CUSTOMER;
    ```
- EXAMPLE 3:
    ```sql
        SELECT
            SUMMARY.CUSTOMER_ID,
            SUMMARY.AVERAGE_AMOUNT
        FROM
        (
            SELECT 
            CUSTOMER_ID,
            AVG(AMOUNT) AS AVERAGE_AMOUNT
            FROM ORDERS
            GROUP BY CUSTOMER_ID
        ) AS SUMMARY;
    ```

## Views in SQL
- A view is a virtual table based on the result-set of an SQL statement. 

- A view always shows up-to-date data because it does not store data itself, it only stores a SELECT query. Whenever a user accesses a view, the database engine executes the original query again on the base tables. As a result, any changes made to the underlying tables are automatically reflected in the view, ensuring that the data shown is always current.
- A view can include columns from one or more tables because it is created using a SELECT query. The SELECT statement IS used to create a view and can fetch data from a single table or combine data from multiple tables using joins. As a result, a view can present related data from different tables in a single, simplified virtual table, making queries easier to understand and use.
- SYNTAX:
    ```SQL
        CREATE VIEW view1 AS
        SELECT COL1,COL2 FROM table_name;
    ```
- EXAMPLE:
    ```SQL
        CREATE VIEW view1 AS
        SELECT CUSTOMER_ID, NAME FROM CUSTOMER;

        SELECT *
        FROM view1;
    ```

## Stored Procedures
- A stored procedure is a set of SQL statements that is saved in the database and can be executed whenever needed. Basically it works like a function.

- SYNTAX:
    ```SQL
        CREATE PROCEDURE procedure_name(IN parameters datatype)
        BEGIN
         -- SQL STATEMENTS;
        END;
    ```
- Procedures won’t work without changing the `DELIMITER`.
- A delimiter is a symbol that tells MySQL where a SQL statement ends.
- EXAMPLE:
    ```sql
        CREATE PROCEDURE CHECK_CITY(IN CUST_ID INT)
        BEGIN
            SELECT NAME, CITY
            FROM ORDERS
            WHERE CUSTOMER_ID = CUST_ID; 
            -- Since we used ";" inside the procedure, MySQL may treat it as the end of the statement.
        END;

        -- Therefore, we use delimiter when using stored procedure.
    ```
    ```sql
        DELIMITER $$
        CREATE PROCEDURE CHECK_CITY(IN CUST_ID INT)
        BEGIN
            SELECT NAME, CITY
            FROM CUSTOMER
            WHERE CUSTOMER_ID = CUST_ID; 
        END $$

        DELIMITER ;
    ```
- SYNTAX to call Store Procedures:
    ```sql
        CALL procedure_name(arguments);
    ```
    ```SQL
        -- EXAMPLE
        CALL CHECK_CITY(3);
    ```
- SYNTAX to drop Store Procedures:
    ```sql
        DROP PROCEDURE IF EXISTS procedure_name;
    ```
    ```sql
        -- EXAMPLE
        DROP PROCEDURE IF EXISTS CHECK_CITY;
    ```

`THE END : )`